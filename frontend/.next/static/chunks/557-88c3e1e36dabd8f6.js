"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{285:(e,t,n)=>{n.d(t,{$:()=>i});var r=n(5155),s=n(4624),a=n(9434);let i=(0,n(2115).forwardRef)((e,t)=>{let{className:n,variant:i="primary",size:o="md",asChild:c=!1,...l}=e,u=c?s.DX:"button";return(0,r.jsx)(u,{className:(0,a.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none cursor-pointer",{"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500":"primary"===i,"bg-secondary-200 text-secondary-900 hover:bg-secondary-300 focus:ring-secondary-500":"secondary"===i,"border border-neutral-300 bg-white text-neutral-700 hover:bg-neutral-50 focus:ring-primary-500":"outline"===i,"text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500":"ghost"===i},{"px-3 py-2 text-sm":"sm"===o,"px-4 py-2 text-sm":"md"===o,"px-6 py-3 text-base":"lg"===o},n),ref:t,...l})});i.displayName="Button"},745:(e,t,n)=>{n.d(t,{Kf:()=>o,_R:()=>s,bD:()=>a,uV:()=>r,vV:()=>i});class r extends Error{getDefaultUserMessage(e){let t={NETWORK_ERROR:"Network connection failed. Please check your internet connection.",TIMEOUT_ERROR:"Request timed out. Please try again.",AUTH_ERROR:"Authentication failed. Please log in again.",PERMISSION_ERROR:"You don't have permission to perform this action.",VALIDATION_ERROR:"Please check your input and try again.",CONFLICT_ERROR:"The requested action conflicts with existing data.",NOT_FOUND_ERROR:"The requested resource was not found.",RATE_LIMIT_ERROR:"Too many requests. Please wait before trying again.",SERVER_ERROR:"Server error. Please try again later.",UNKNOWN_ERROR:"An unexpected error occurred. Please try again."};return t[e]||t.UNKNOWN_ERROR}constructor({message:e,code:t="UNKNOWN_ERROR",userMessage:n,context:r,originalError:s,retryable:a=!1}){super(e),this.name="AppError",this.code=t,this.userMessage=n||this.getDefaultUserMessage(t),this.context=r,this.originalError=s,this.retryable=a}}function s(e,t){var n,s,a;let i=new Date().toISOString(),o={...t,timestamp:i};if(!e.response&&("ERR_NETWORK"===e.code||(null==(n=e.message)?void 0:n.includes("fetch"))))return new r({message:e.message,code:"NETWORK_ERROR",context:o,originalError:e,retryable:!0});if("ECONNABORTED"===e.code||(null==(s=e.message)?void 0:s.includes("timeout")))return new r({message:e.message,code:"TIMEOUT_ERROR",context:o,originalError:e,retryable:!0});if(null==(a=e.response)?void 0:a.status){let t=e.response.status,n=e.response.data;switch(t){case 400:return new r({message:(null==n?void 0:n.message)||"Bad request",code:"VALIDATION_ERROR",userMessage:(null==n?void 0:n.userMessage)||"Please check your input and try again.",context:o,originalError:e,retryable:!1});case 401:return new r({message:"Unauthorized",code:"AUTH_ERROR",context:o,originalError:e,retryable:!1});case 403:return new r({message:"Forbidden",code:"PERMISSION_ERROR",context:o,originalError:e,retryable:!1});case 404:return new r({message:"Not found",code:"NOT_FOUND_ERROR",userMessage:(null==n?void 0:n.userMessage)||"The requested item was not found.",context:o,originalError:e,retryable:!1});case 409:return new r({message:"Conflict",code:"CONFLICT_ERROR",userMessage:(null==n?void 0:n.userMessage)||"This action conflicts with existing data.",context:o,originalError:e,retryable:!1});case 429:return new r({message:"Rate limit exceeded",code:"RATE_LIMIT_ERROR",context:o,originalError:e,retryable:!0});case 500:case 502:case 503:case 504:return new r({message:"Server error",code:"SERVER_ERROR",userMessage:(null==n?void 0:n.userMessage)||"Server error. Our team has been notified.",context:o,originalError:e,retryable:!0})}}return new r({message:e.message||"Unknown error",code:"UNKNOWN_ERROR",context:o,originalError:e,retryable:!1})}async function a(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxAttempts:s=3,baseDelay:a=1e3,maxDelay:i=1e4,exponentialBackoff:o=!0,retryCondition:c=e=>e instanceof r&&e.retryable}=n;for(let n=1;n<=s;n++)try{return await e()}catch(r){if(t=r,n===s||!c(t))throw t;let e=o?Math.min(a*Math.pow(2,n-1),i):a;e+=Math.random()*e*.1,console.warn("Retrying operation (attempt ".concat(n,"/").concat(s,") after ").concat(e,"ms:"),t.message),await new Promise(t=>setTimeout(t,e))}throw t}function i(e,t){console.error("Application Error:",{error:{name:e.name,message:e.message,code:e.code,userMessage:e.userMessage,retryable:e.retryable,stack:e.stack},context:e.context,originalError:e.originalError?{name:e.originalError.name,message:e.originalError.message,stack:e.originalError.stack}:void 0,additionalContext:t,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent})}function o(e,t,n){let s=[];for(let r of t)if(!e[r]||"string"==typeof e[r]&&!e[r].trim()){let e=(null==n?void 0:n[r])||String(r);s.push(e)}if(s.length>0)throw new r({message:"Missing required fields: ".concat(s.join(", ")),code:"VALIDATION_ERROR",userMessage:"Please provide: ".concat(s.join(", ")),retryable:!1})}},3843:(e,t,n)=>{n.d(t,{$:()=>a});var r=n(9509);let s={NEXT_PUBLIC_APP_NAME:"Coffee Scheduler"},a=(r.env.VERCEL_ENV,{apiUrl:"http://localhost:5001",nodeEnv:"production",appName:r.env.NEXT_PUBLIC_APP_NAME||s.NEXT_PUBLIC_APP_NAME,isDevelopment:!1,isProduction:!0,isTest:!1})},5731:(e,t,n)=>{n.d(t,{F:()=>a});var r=n(3464);let s=n(3843).$.apiUrl,a=r.A.create({baseURL:s,withCredentials:!0,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>e,e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(window.location.href="/login"),Promise.reject(e)})},6441:(e,t,n)=>{n.d(t,{uH:()=>i});var r=n(5731),s=n(745);class a{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=async()=>{try{var n;let s=this.mapRoute(e),a={...t,url:s,timeout:t.timeout||3e4};a.data&&(a.data=this.transformRequestData(e,a.data));let i=await r.F.request(a);return{data:this.transformResponseData(e,i.data),success:!0,message:null==(n=i.data)?void 0:n.message}}catch(r){let n=this.handleError(r,e);throw(0,s.vV)(n,{frontendRoute:e,backendRoute:this.mapRoute(e),requestData:t.data}),n}};return n||this.shouldRetry(e,t.method)?(0,s.bD)(a,{maxAttempts:3,retryCondition:e=>e instanceof s.uV&&e.retryable,...n}):a()}async get(e,t){return this.request(e,{...t,method:"GET"})}async post(e,t,n){return this.request(e,{...n,method:"POST",data:t})}async put(e,t,n){return this.request(e,{...n,method:"PUT",data:t})}async delete(e,t){return this.request(e,{...t,method:"DELETE"})}mapRoute(e){let t=e.split("?")[0],n=e.split("?")[1],r=this.routeMap[t]||e;if(!this.routeMap[t]){let e=t.split("/");for(let[t,n]of Object.entries(this.routeMap)){let s=t.split("/");if(e.length===s.length){let t=!0;for(let n=0;n<e.length;n++)if(s[n]!==e[n]&&!s[n].startsWith(":")){t=!1;break}if(t){let t=n.split("/");for(let n=0;n<e.length;n++)s[n].startsWith(":")&&(t[n]=e[n]);r=t.join("/");break}}}}return n&&(r+="?"+n),r}transformRequestData(e,t){return e.includes("/api/scheduling")?this.transformSchedulingRequest(t):e.includes("/api/events")?this.transformEventRequest(t):e.includes("/api/contacts")?this.transformContactRequest(t):t}transformResponseData(e,t){return e.includes("/api/events")?this.transformEventResponse(t):e.includes("/api/scheduling")?this.transformSchedulingResponse(t):e.includes("/api/contacts")?this.transformContactResponse(t):e.includes("/api/settings")?this.transformSettingsResponse(t):t}transformSchedulingRequest(e){var t;let n={contactIds:e.contactIds||(null==(t=e.contacts)?void 0:t.map(e=>e.id))||[],duration:e.duration||30,slotsPerContact:e.slotsPerContact||3,dateRange:e.dateRange||{start:new Date().toISOString(),end:new Date(Date.now()+12096e5).toISOString()},consultantMode:!1!==e.consultantMode};return Array.isArray(n.contactIds)&&(n.contactIds=n.contactIds.map(e=>String(e))),n}transformSchedulingResponse(e){return e.suggestions?{sessionId:e.sessionId||Date.now().toString(),participants:e.suggestions.map(e=>{var t,n,r,s,a;return{id:e.contactId||(null==(t=e.contact)?void 0:t.id),name:e.contactName||(null==(n=e.contact)?void 0:n.name),email:e.contactEmail||(null==(r=e.contact)?void 0:r.email),timezone:e.timezone||(null==(s=e.contact)?void 0:s.timezone),timeSlots:(null==(a=e.slots)?void 0:a.map(e=>e.displayTime||e.time))||[]}})}:e}transformEventRequest(e){return{title:e.title||"Coffee Chat",participants:e.participants||[],duration:e.duration||30,scheduledTime:e.date||e.scheduledTime,type:e.type||"coffee_chat"}}transformEventResponse(e){return Array.isArray(e)?e.map(e=>this.transformSingleEvent(e)):e.events?e.events.map(e=>this.transformSingleEvent(e)):e}transformSingleEvent(e){var t,n;return{id:e._id||e.id,title:e.title||"Coffee Chat",participants:e.participants||(null==(t=e.contacts)?void 0:t.map(e=>e.name))||[],date:new Date(e.scheduledTime||e.date),status:this.mapEventStatus(e.status),duration:e.duration||30,finalTimeSlot:(null==(n=e.selectedSlot)?void 0:n.displayTime)||e.finalTimeSlot,type:e.type||"coffee_chat",createdAt:e.createdAt?new Date(e.createdAt):void 0,updatedAt:e.updatedAt?new Date(e.updatedAt):void 0}}transformContactRequest(e){return{name:e.name,email:e.email,timezone:e.timezone,meetingPreferences:e.meetingPreferences||{duration:60,timeOfDay:e.timeOfDay||"any"}}}transformContactResponse(e){return Array.isArray(e)?e.map(e=>this.transformSingleContact(e)):e.contacts?e.contacts.map(e=>this.transformSingleContact(e)):this.transformSingleContact(e)}transformSingleContact(e){return{_id:e._id||e.id,userId:e.userId,name:e.name,email:e.email,timezone:e.timezone,status:e.status||"pending",meetingPreferences:e.preferences||e.meetingPreferences||{duration:30},createdAt:e.createdAt,updatedAt:e.updatedAt}}transformSettingsResponse(e){return{user:e.user||e,preferences:e.preferences||{},settings:e.settings||{}}}mapEventStatus(e){return({completed:"completed",cancelled:"cancelled",scheduled:"scheduled",confirmed:"scheduled",pending:"scheduled"})[e]||"scheduled"}shouldRetry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET";return!!("GET"===t.toUpperCase()||e.includes("/api/scheduling")||e.includes("/api/health"))}handleError(e,t){return(0,s._R)(e,{operation:"API Request: ".concat(t||"unknown"),component:"APIAdapter"})}constructor(){this.routeMap={"/api/auth/google":"/api/auth/google","/api/auth/status":"/api/auth/status","/api/auth/logout":"/api/auth/logout","/api/contacts":"/api/contacts","/api/events":"/api/calendar/events","/api/events/past":"/api/calendar/events?filter=past","/api/events/upcoming":"/api/calendar/events?filter=upcoming","/api/scheduling":"/api/scheduling","/api/scheduling/generate":"/api/scheduling","/api/scheduling/suggestions":"/api/scheduling/suggestions","/api/scheduling/clear":"/api/scheduling/suggestions","/api/scheduling/confirm":"/api/scheduling/confirm","/api/scheduling/session":"/api/scheduling","/api/pending-events":"/api/pending-events","/api/pending-events/bulk":"/api/pending-events/bulk","/api/pending-events/bulk-clear":"/api/pending-events/bulk-clear","/api/pending-events/blocked-slots":"/api/pending-events/blocked-slots","/api/pending-events/cleanup":"/api/pending-events/cleanup","/api/pending-events/check-conflict":"/api/pending-events/check-conflict","/api/pending-events/stats":"/api/pending-events/stats","/api/settings":"/api/user/preferences","/api/settings/profile":"/api/user/profile","/api/settings/export":"/api/user/export","/api/health":"/api/health"}}}let i=new a},9434:(e,t,n)=>{n.d(t,{cn:()=>s});var r=n(2596);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.$)(t)}}}]);